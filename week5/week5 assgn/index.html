<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="my.css">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="titlesize">재고 관리</div>
        </div>
        <div class="container">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">품명</th>
                        <th scope="col">수량</th>
                        <th scope="col">가격</th>
                        <th scope="col">상태</th>
                        <th scope="col">입고처</th>
                        <th scope="col">출고처</th>
                    </tr>
                </thead>
                <tbody id="stockTableBody"></tbody>
            </table>

            <button type="button" class="btn btn-primary" onclick="location.href='add.html'">추가</button>
        </div>
        <script>
            let stockData = JSON.parse(localStorage.getItem("stockData"));

            stockData =[
        {name:"새우깡", qt:50, pc:1500, sta:"정상", inP:"농심", outP:"마트"},
        {name:"감자깡", qt:30, pc:1300, sta:"정상", inP:"농심", outP:"편의점"},
        {name:"초코파이", qt:20, pc:1200, sta:"정상", inP:"오리온", outP:"마트"},
        {name:"포카칩", qt:40, pc:1600, sta:"정상", inP:"농심", outP:"편의점"},
        {name:"칸쵸", qt:25, pc:1000, sta:"정상", inP:"롯데", outP:"마트"},
        {name:"홈런볼", qt:35, pc:1100, sta:"정상", inP:"롯데", outP:"편의점"},
        {name:"허니버터칩", qt:15, pc:2000, sta:"정상", inP:"해태", outP:"마트"},
        {name:"빼빼로", qt:60, pc:1500, sta:"정상", inP:"롯데", outP:"편의점"},
        {name:"포도맛사탕", qt:80, pc:800, sta:"정상", inP:"해태", outP:"마트"},
        {name:"딸기맛껌", qt:70, pc:900, sta:"정상", inP:"롯데", outP:"편의점"}
        ];
        
            // 값 불러오기
            localStorage.setItem("stockData", JSON.stringify(stockData));

            const tableBody = document.getElementById("stockTableBody");

            tableBody.innerHTML = "";
            //stocktablebody에 값 넣어주기
            for (let i = 0; i < stockData.length; i++) {
                const item = stockData[i];

                const tr = document.createElement("tr");

                const th = document.createElement("th");
                th.scope = "row";
                th.textContent = stockData.length - i;
                tr.appendChild(th);

                const tdName = document.createElement("td");
                tdName.textContent = item.name;
                tr.appendChild(tdName);

                const tdQt = document.createElement("td");
                tdQt.textContent = item.qt;
                tr.appendChild(tdQt);

                const tdPc = document.createElement("td");
                tdPc.textContent = item.pc;
                tr.appendChild(tdPc);

                const tdSta = document.createElement("td");
                tdSta.textContent = item.sta;
                tr.appendChild(tdSta);

                const tdIn = document.createElement("td");
                tdIn.textContent = item.inP;
                tr.appendChild(tdIn);

                const tdOut = document.createElement("td");
                tdOut.textContent = item.outP;
                tr.appendChild(tdOut);

                tableBody.appendChild(tr);
            } 
            //링크 달아주기
            function renderTable() {
                tableBody.innerHTML = "";
                stockData.forEach((item, index) => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                    <th scope="row">${index + 1}</th>
                    <td><a href="view.html?index=${index}" >${item.name}</a></td>
                    <td>${item.qt}</td>
                    <td>${item.pc}</td>
                    <td>${item.sta}</td>
                    <td>${item.inP}</td>
                    <td>${item.outP}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }
            renderTable();
        </script>
    </body>
</html>