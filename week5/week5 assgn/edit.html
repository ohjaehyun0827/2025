<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="my.css">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="titlesize">품목 상세보기</div>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">품명</th>
                        <th scope="col">수량</th>
                        <th scope="col">가격</th>
                        <th scope="col">상태</th>
                        <th scope="col">입고처</th>
                        <th scope="col">출고처</th>
                    </tr>
                </thead>
                <tbody id="stockTableBody"></tbody>
            </table>
                
            <h2>품목 수정</h2>

            <form name="editform" onsubmit="return validateForm()">
                <div class="mb-3">
                <label>품명</label>
                <input type="text" id="name" class="form-control">
                </div>
                <div class="mb-3">
                <label>수량</label>
                <input type="number" id="qt" class="form-control">
                </div>
                <div class="mb-3">
                <label>가격</label>
                <input type="number" id="pc" class="form-control">
                </div>
                <div class="mb-3">
                <label>상태</label>
                <input type="text" id="sta" class="form-control">
                </div>
                <div class="mb-3">
                <label>입고처</label>
                <input type="text" id="inP" class="form-control">
                </div>
                <div class="mb-3">
                <label>출고처</label>
                <input type="text" id="outP" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">확인</button>
                <button type="button" class="btn btn-secondary" onclick="location.href='index.html'">취소</button>
            </form>
        </div>

        <script>
            // url에서 index값 가져옴
            const params = new URLSearchParams(window.location.search);
            const index = params.get("index");

            // 데이터 가져오기
            let stockData = JSON.parse(localStorage.getItem("stockData")) || [];
            const item = stockData[index];
            
            ///table에 index와 일치하는 품목 가져오기
            const tableBody = document.getElementById("stockTableBody");
            tableBody.innerHTML = `
            <tr>
                <th scope="row">${parseInt(index)+1}</th>
                <td>${item.name}</td>
                <td>${item.qt}</td>
                <td>${item.pc}</td>
                <td>${item.sta}</td>
                <td>${item.inP}</td>
                <td>${item.outP}</td>
            </tr>
            `;
            //validation 창
            function validateForm(){
                var name = document.editform.name;
                if (name.value ==""){
                    alert("품명을 입력하세요");
                    return false;
                }
                var qt = document.editform.qt;
                if (qt.value ==""){
                    alert("수량을 입력하세요");
                    return false;
                }
                var pc = document.editform.pc;
                if (pc.value ==""){
                    alert("가격을 입력하세요");
                    return false;
                }
                var sta = document.editform.sta;
                if (sta.value ==""){
                    alert("상태를 입력해주세요");
                    return false;
                }
                btnalert();
            }
            function btnalert(){
                confirm('게시물을 수정할까요?')
            }
        </script>
    </body>
</html>

